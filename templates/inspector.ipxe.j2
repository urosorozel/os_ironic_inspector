#!ipxe

:retry_boot
echo In inspector.ipxe
imgfree
# NOTE(dtantsur): keep inspection kernel params in [mdns]params in ironic-inspector-image
kernel --timeout 60000 http://{{ hostvars[inventory_hostname]['ansible_' + ironic_inspector_dhcp_interface|replace("-","_")]['ipv4']['address'] }}:{{ ironic_inspector_webfsd_port }}/ipa_kernel ipa-inspection-callback-url=http://{{ external_lb_vip_address }}:5050/v1/continue {{ ironic_inspector_pxe_append_params }} BOOTIF=${mac:hexhyp} initrd=ipa_ramdisk || goto retry_boot
initrd --timeout 60000 http://{{ hostvars[inventory_hostname]['ansible_' + ironic_inspector_dhcp_interface|replace("-","_")]['ipv4']['address'] }}:{{ ironic_inspector_webfsd_port }}/ipa_ramdisk || goto retry_boot
boot
